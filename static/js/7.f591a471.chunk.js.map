{"version":3,"sources":["components/SavedRecipes/SavedRecipes.js"],"names":["SavedRecipes","user","loadUser","useState","savedRecipes","setSavedRecipes","useEffect","fetch","user_id","method","headers","window","localStorage","getItem","then","resp","json","recipes","catch","console","log","recipes_number","className","id","map","recipe","href","url","title","width","alt","src","image","style","recipe_id","defaultValue","note","onClick","e","event","preventDefault","document","getElementById","body","JSON","stringify","value","err","textAreaSubmit","float","data","deleteRecipe"],"mappings":"iLAyHeA,UApHf,YAAyC,IAAlBC,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,SAC3B,EAAwCC,mBAAS,IAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KA4EA,OA1EAC,qBAAU,WACRC,MAAM,uDAAD,OAAwDN,EAAKO,SAAW,CAC3EC,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChB,cAAiBC,OAAOC,aAAaC,QAAQ,YAGhDC,MAAK,SAAAC,GAAI,OAAGA,EAAKC,UACjBF,MAAK,SAAAG,GACJZ,EAAgBY,MAEjBC,MAAMC,QAAQC,OACf,CAACnB,EAAKoB,iBA8DN,qBAAKC,UAAU,MAAf,SAEE,wBAAQC,GAAG,UAAX,UACE,gCACE,+BACE,2CACA,yCACA,sCACA,6CAIFnB,EAAaoB,KAAK,SAAAC,GAClB,OACE,gCACE,+BACE,6BAAI,oBAAGC,KAAMD,EAAOE,IAAhB,cAAuBF,EAAOG,MAA9B,SACJ,oBAAIC,MAAM,MAAV,SAAgB,qBAAKC,IAAI,SAASC,IAAKN,EAAOO,MAAOC,MAAO,CAACJ,MAAO,WACpE,+BACE,0BAAUN,GAAIE,EAAOS,UAAWC,aAAcV,EAAOW,OACrD,wBAAQd,UAAU,SAASe,QAAS,SAACC,GAAD,OA5E7B,SAACC,EAAOL,GAC3BK,EAAMC,iBACN,IAAMJ,EAAOK,SAASC,eAAeR,GACrC3B,MAAM,uDAAD,OAAwDN,EAAKO,SAAW,CAC3EC,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChB,cAAiBC,OAAOC,aAAaC,QAAQ,UAE/C8B,KAAMC,KAAKC,UAAU,CACnBX,UAAWA,EACXE,KAAMA,EAAKU,UAGdhC,MAAK,SAAAC,GAAI,OAAIA,EAAKC,UAClBE,OAAM,SAAA6B,GAAG,OAAI5B,QAAQC,IAAI,wBA6D6B4B,CAAeV,EAAGb,EAAOS,YAClED,MAAO,CAACgB,MAAO,SADjB,qBAIF,6BACE,wBAAQ3B,UAAU,SAASe,QAAU,SAACC,GAAD,OA/DhC,SAACA,EAAGJ,GACvBI,EAAEE,iBACFjC,MAAM,uDAAD,OAAwDN,EAAKO,SAAW,CACzEC,OAAQ,SACRC,QAAS,CACP,eAAgB,mBAChB,cAAiBC,OAAOC,aAAaC,QAAQ,UAE/C8B,KAAMC,KAAKC,UAAU,CACnBX,UAAWA,MAGdpB,MAAK,SAAAC,GAAI,OAAIA,EAAKC,UAClBF,MAAK,SAAAoC,GACAA,GACD3C,MAAM,iDAAD,OAAkDN,EAAKO,SAAW,CACpEC,OAAQ,SACRC,QAAS,CACP,eAAgB,mBAChB,cAAiBC,OAAOC,aAAaC,QAAQ,YAGjDC,MAAK,SAAAC,GAAI,OAAIA,EAAKC,UAClBF,MAAK,SAAAoC,GAEJhD,EAASgD,MAEVhC,OAAM,SAAA6B,GAAG,OAAI5B,QAAQC,IAAI2B,SAG9B7B,OAAM,SAAA6B,GACO,iBAARA,GACF5B,QAAQC,IAAI2B,MA+BwCI,CAAab,EAAGb,EAAOS,YAAnE,0BAXMT,EAAOS","file":"static/js/7.f591a471.chunk.js","sourcesContent":["import './SavedRecipes.css';\r\nimport { useState, useEffect } from 'react';\r\n\r\n\r\n\r\nfunction SavedRecipes({user, loadUser}) {\r\n  const [savedRecipes, setSavedRecipes] = useState([])\r\n  \r\n  useEffect(() => {\r\n    fetch(`https://warm-reef-43761.herokuapp.com/saved_recipes/${user.user_id}`, {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'authorization': window.localStorage.getItem('token')\r\n      } \r\n    })\r\n    .then(resp=> resp.json())\r\n    .then(recipes => {\r\n      setSavedRecipes(recipes)      \r\n    })\r\n    .catch(console.log)\r\n  },[user.recipes_number])\r\n\r\n  \r\n\r\n \r\n\r\n  const textAreaSubmit = (event, recipe_id) => {  \r\n      event.preventDefault();        \r\n      const note = document.getElementById(recipe_id)    \r\n      fetch(`https://warm-reef-43761.herokuapp.com/saved_recipes/${user.user_id}`, {\r\n        method: 'put',\r\n        headers: { \r\n          'content-type': 'Application/json',\r\n          'authorization': window.localStorage.getItem('token')\r\n        },\r\n        body: JSON.stringify({\r\n          recipe_id: recipe_id,\r\n          note: note.value\r\n          })\r\n        })\r\n      .then(resp => resp.json())\r\n      .catch(err => console.log('can not save note'))\r\n     \r\n};\r\n  const deleteRecipe = (e, recipe_id) => {     \r\n    e.preventDefault()\r\n    fetch(`https://warm-reef-43761.herokuapp.com/saved_recipes/${user.user_id}`, {\r\n        method: 'delete',\r\n        headers: { \r\n          'content-type': 'Application/json',\r\n          'authorization': window.localStorage.getItem('token')\r\n        },\r\n        body: JSON.stringify({\r\n          recipe_id: recipe_id          \r\n          })\r\n        })\r\n      .then(resp => resp.json()) \r\n      .then(data => { \r\n        if (data) {          \r\n           fetch(`https://warm-reef-43761.herokuapp.com/profile/${user.user_id}`, {\r\n              method: 'delete',\r\n              headers: {\r\n                'Content-Type': 'application/json',\r\n                'authorization': window.localStorage.getItem('token')\r\n              }              \r\n            })\r\n           .then(resp => resp.json())\r\n           .then(data => {\r\n\r\n             loadUser(data)            \r\n           })\r\n           .catch(err => console.log(err))\r\n        }\r\n      })     \r\n      .catch(err => {\r\n        if (err === 'unauthorized') {\r\n          console.log(err)\r\n        }\r\n      })\r\n  }\r\n\r\n  return (\r\n    <div className='ma3' >\r\n    \r\n      <table  id='recipes'>\r\n        <tbody>\r\n          <tr>\r\n            <th>Food Name</th>\r\n            <th>Picture</th>\r\n            <th>Note</th>\r\n            <th>Delete</th>\r\n          </tr>\r\n        </tbody>\r\n       \r\n        { savedRecipes.map( recipe => {\r\n          return (\r\n            <tbody key={recipe.recipe_id}>            \r\n              <tr>\r\n                <td><a href={recipe.url}> {recipe.title} </a></td>              \r\n                <td width='20%'><img alt='recipe' src={recipe.image} style={{width: '70%'}}/></td>\r\n                <td>\r\n                  <textarea id={recipe.recipe_id} defaultValue={recipe.note} />                       \r\n                  <button className='button' onClick={(e) => textAreaSubmit(e, recipe.recipe_id)} \r\n                    style={{float: \"right\"}} >\r\n                  Save</button>                \r\n                </td>\r\n                <td>\r\n                  <button className='button' onClick={ (e) => deleteRecipe(e, recipe.recipe_id) } >delete</button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          )\r\n        })}\r\n      </table>\r\n    </div>\r\n  )\r\n \r\n}\r\n\r\n\r\nexport default SavedRecipes;\r\n"],"sourceRoot":""}